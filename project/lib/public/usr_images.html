<!DOCTYPE html>
<html lang="en" ng-app="APP">
    <head>
        <meta charset="UTF-8">
        <title>Topaz Labs</title>
        <link rel ="stylesheet" type = "text/css" href="style.css">

    </head>
    <body bgcolor= "#999999" >
        <center>
            <h1 class = "logo"></h1>

<!--+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
        
        <div>
            <h2>Select an image to save</h2>
            <body onload="add_google_logo();"></body>
        </div>


        <b><a href="https://github.com/mrlennix/CloudProcessing" target="_blank" class="footer">Contact Us</a></b>




          
<!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
        </center>
        <script>
            // var obj = document.createElement("obj");
                function add_google_logo() {

// -----------------------------------------------------------------------------
                    var getJSON = function(url, callback) {
                        var xhr = new XMLHttpRequest();
                        xhr.open('GET', url, true);
                        xhr.responseType = 'json';
                        xhr.onload = function() {
                          var status = xhr.status;
                          if (status == 200) {
                            callback(null, xhr.response);
                          } else {
                            callback(status);
                          }
                        };
                        xhr.send();
        };

        getJSON('http://localhost:668/all',
        function(err, data) {
          if (err != null) {
            alert('Something went wrong: ' + err);
          } else {
            for (key in data)
            {
                var src = "http://localhost:668/image?fname=" + data[key];
                show_image(src, 276,200, "Google Logo", data[key], 'href ='+src);   
            }

          }
        });
//-------------------------------------------------------------------------

    }


    function show_image(src, width, height, alt,filename, href) {
        // document.write('<a href = "' + src +'" download');
        var img = document.createElement("img");
        img.src = src;
        img.width = width;
        img.height = height;
        img.alt = alt; 
        img.href = src;
        img.download = src;
        

        var a = document.createElement('a');
        var link_image = img;
        a.appendChild(link_image);
        a.download = document.body.appendChild(a);
        a.href = src;
        document.body.appendChild(a);



    }

        


        </script>
    </a></body>
</html>
